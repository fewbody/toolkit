<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMOOTHIE Input Generator</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #3498db;
            --primary-dark: #2980b9;
            --secondary-color: #2ecc71;
            --secondary-dark: #27ae60;
            --warning-color: #e74c3c;
            --dark-color: #34495e;
            --light-color: #ecf0f1;
            --gray-color: #95a5a6;
            --header-height: 60px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
    .logo-container {
        display: flex;
        align-items: center;
        margin-right: 15px;
    }
    
    .title-container {
        flex: 1;
    }
    
    header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.5rem 2rem;
    }        
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem 2rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        header h1 {
            font-weight: 700;
            font-size: 1.5rem;
        }
        
        .container {
            margin-top: calc(var(--header-height) + 20px);
            padding: 20px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .intro {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .tab {
            padding: 15px 25px;
            cursor: pointer;
            flex: 1;
            text-align: center;
            background: var(--light-color);
            transition: all 0.3s;
            font-weight: 600;
            color: var(--dark-color);
            border-bottom: 2px solid transparent;
        }
        
        .tab.active {
            background: white;
            border-bottom: 2px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .tab-content {
            display: none;
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .form-group h3 {
            margin-bottom: 15px;
            color: var(--dark-color);
            font-weight: 600;
        }
        
        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -10px;
        }
        
        .form-field {
            flex: 1;
            min-width: 250px;
            padding: 0 10px;
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--dark-color);
        }
        
        footer {
            text-align: center;
            padding: 2rem 0;
            color: #666;
            font-size: 0.9rem;
        }
        
        .input-help {
            display: block;
            font-size: 0.8rem;
            color: var(--gray-color);
            margin-top: 3px;
        }
        
        input[type="text"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        input[type="text"]:focus,
        input[type="number"]:focus,
        select:focus,
        textarea:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s;
            margin-right: 10px;
        }
        
        .btn:hover {
            background-color: var(--primary-dark);
        }
        
        .btn-secondary {
            background-color: var(--secondary-color);
        }
        
        .btn-secondary:hover {
            background-color: var(--secondary-dark);
        }
        
        .btn-warning {
            background-color: var(--warning-color);
        }
        
        .output-container {
            background: var(--dark-color);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            position: relative;
        }
        
        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .output-header h3 {
            font-weight: 600;
        }
        
        .copy-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }
        
        .copy-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        #output {
            width: 100%;
            min-height: 300px;
            background: transparent;
            color: white;
            border: none;
            font-family: 'Courier New', Courier, monospace;
            resize: vertical;
            padding: 10px;
            white-space: pre;
            overflow-x: auto;
        }

        /* Add this for potential rows */
        .potential-row {
            background-color: rgba(52, 152, 219, 0.05);
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
            position: relative;
        }
        
        .remove-potential {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(231, 76, 60, 0.2);
            color: var(--warning-color);
            border: none;
            border-radius: 4px;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .remove-potential:hover {
            background: rgba(231, 76, 60, 0.4);
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
            margin-left: 5px;
            color: var(--gray-color);
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--dark-color);
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.8rem;
            font-weight: normal;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        .alert {
            padding: 10px 15px;
            border-radius: 4px;
            margin-bottom: 15px;
            font-weight: 500;
        }
        
        .alert-info {
            background-color: rgba(52, 152, 219, 0.1);
            color: var(--primary-color);
            border-left: 4px solid var(--primary-color);
        }
    </style>
</head>

<body>
    <header>
            <h1>Smoothie Input Generator</h1>
            <p>Generate input files for Smoothie code for Nonelastic Breakup calculations</p>
        <div>
            <button id="download-btn" class="btn btn-secondary">
                <i class="fas fa-download"></i> Download Input
            </button>
        </div>
    </header>

    <div class="container">
        <div class="intro">
            <h2>Welcome to the SMOOTHIE Input Generator</h2>
            <p>Select the type of calculation you want to perform and fill in the parameters to generate the input file.</p>
            <p>Smoothie assumes an inclusive process is of the form: <strong>a(=b+x) + A -> b + B</strong>, where <strong>B= (x+A)</strong></p>
            <p>Currently focused on DWBA (Distorted Wave Born Approximation) calculations.</p>
            <div class="alert alert-info">
                <i class="fas fa-info-circle"></i> Note: This generator is specifically configured for DWBA calculations. For CDCC calculations, a different configuration would be needed.
            </div>
        </div>

        <div class="tabs">
            <div class="tab active" data-tab="global">Global Parameters</div>
            <div class="tab" data-tab="system">System</div>
            <div class="tab" data-tab="outgoing">Outgoing Channels</div>
            <div class="tab" data-tab="potential">Potentials</div>
            <div class="tab" data-tab="vincent">Vincent Method</div>
        </div>

        <div id="global-tab" class="tab-content active">
            <div class="form-group">
                <h3>Calculation Grid and Angular Momentum</h3>
                <div class="form-row">
                    <div class="form-field">
                        <label for="hcm">hcm</label>
                        <input type="number" id="hcm" value="0.05" step="0.01">
                        <span class="input-help">Step size for radial grid (fm)</span>
                    </div>
                    <div class="form-field">
                        <label for="rmax">rmax</label>
                        <input type="number" id="rmax" value="7000" step="10">
                        <span class="input-help">Maximum radius (fm)</span>
                    </div>
                    <div class="form-field">
                        <label for="nr">nr</label>
                        <input type="number" id="nr" value="60" min="1">
                        <span class="input-help">Number of radial points for Gaussian integration</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-field">
                        <label for="lmax">lmax</label>
                        <input type="number" id="lmax" value="30" min="0">
                        <span class="input-help">Maximum orbital angular momentum for a+A and b+B channels</span>
                    </div>
                    <div class="form-field">
                        <label for="lmin">lmin</label>
                        <input type="number" id="lmin" value="0" min="0">
                        <span class="input-help">Minimum angular momentum</span>
                    </div>
                    <div class="form-field">
                        <label for="jtmax">jtmax</label>
                        <input type="number" id="jtmax" value="-30.0" step="0.5">
                        <span class="input-help">Maximum total J value (-30 means 2*lmax)</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-field">
                        <label for="lxmax">lxmax</label>
                        <input type="number" id="lxmax" value="-99" min="-99">
                        <span class="input-help">Maximum angular momentum for x particle (-99 = use cutl)</span>
                    </div>
                    <div class="form-field">
                        <label for="lxmin">lxmin</label>
                        <input type="number" id="lxmin" value="0" min="0">
                        <span class="input-help">Minimum angular momentum for x particle</span>
                    </div>
                    <div class="form-field">
                        <label for="nx">nx</label>
                        <input type="number" id="nx" value="30" min="1">
                        <span class="input-help">Number of points for Gaussian quadrature angular integration</span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <h3>Energy and Angular Distribution</h3>
                <div class="form-row">
                    <div class="form-field">
                        <label for="elab">elab</label>
                        <input type="number" id="elab" value="0.0" step="0.1">
                        <span class="input-help">Laboratory energy (MeV)</span>
                    </div>
                    <div class="form-field">
                        <label for="jtmin">jtmin</label>
                        <input type="number" id="jtmin" value="0.0" step="0.5">
                        <span class="input-help">Minimum angular momentum for target</span>
                    </div>
                    <div class="form-field">
                        <label for="jtmax">jtmax</label>
                        <input type="number" id="jtmax" value="-30.0" step="0.5">
                        <span class="input-help">Maximum angular momentum for target (-30 = use 2*lmax)</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-field">
                        <label for="thmin">thmin</label>
                        <input type="number" id="thmin" value="0.0" min="0" max="180">
                        <span class="input-help">Minimum angle for angular distribution (degrees)</span>
                    </div>
                    <div class="form-field">
                        <label for="thmax">thmax</label>
                        <input type="number" id="thmax" value="180.0" min="0" max="180">
                        <span class="input-help">Maximum angle for angular distribution (degrees)</span>
                    </div>
                    <div class="form-field">
                        <label for="thinc">thinc</label>
                        <input type="number" id="thinc" value="1.0" min="0.1" step="0.1">
                        <span class="input-help">Angle increment (degrees)</span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <h3>Calculation Type and Options</h3>
                <div class="form-row">
                    <div class="form-field">
                        <label for="dwba">dwba</label>
                        <select id="dwba">
                            <option value="1">1 - DWBA without spins, rbx integration</option>
                            <option value="2">2 - DWBA without spins, rb integration</option>
                            <option value="3">3 - DWBA with spins, rb integration</option>
                            <option value="4">4 - DWBA without spins, rbx, Lagrange-mesh</option>
                            <option value="5">5 - DWBA without spins, rb, Lagrange-mesh</option>
                            <option value="6">6 - DWBA without spins, m0</option>
                        </select>
                        <span class="input-help">Controls numerical method for DWBA calculation</span>
                    </div>
                    <div class="form-field">
                        <label for="cutl">cutl</label>
                        <input type="number" id="cutl" value="30" min="0">
                        <span class="input-help">Maximum angular momentum for x+A channel (≤ lmax)</span>
                    </div>
                    <div class="form-field">
                        <label for="rs">rs</label>
                        <input type="number" id="rs" value="-9999.0" step="0.1">
                        <span class="input-help">if>0, then dumping the bound state wave function with exp(-0.693*( exp( (rs - r) /0.1) ) )</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-field">
                        <div class="checkbox-label">
                            <input type="checkbox" id="prior">
                            <label for="prior">prior</label>
                        </div>
                        <span class="input-help">If checked, use IAV-prior form. Otherwise, use IAV-post form</span>
                    </div>
                    <div class="form-field">
                        <div class="checkbox-label">
                            <input type="checkbox" id="printf">
                            <label for="printf">printf</label>
                        </div>
                        <span class="input-help">Print wave function for x-A channel and source term</span>
                    </div>
                    <div class="form-field">
                        <div class="checkbox-label">
                            <input type="checkbox" id="icf">
                            <label for="icf">icf</label>
                        </div>
                        <span class="input-help">Perform incomplete fusion calculation ⟨ψₓ|Wfus|ψₓ⟩</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-field">
                        <div class="checkbox-label">
                            <input type="checkbox" id="HM">
                            <label for="HM">HM</label>
                        </div>
                        <span class="input-help">Use Hussein-McVoy model</span>
                    </div>
                    <div class="form-field">
                        <div class="checkbox-label">
                            <input type="checkbox" id="UT">
                            <label for="UT">UT</label>
                        </div>
                        <span class="input-help">Use Udagawa-Tamura model</span>
                    </div>
                    <div class="form-field">
                        <label for="jtmin">jtmin</label>
                        <input type="number" id="jtmin" value="0.0" step="0.5">
                        <span class="input-help">Minimum total J value</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-field">
                        <div class="checkbox-label">
                            <input type="checkbox" id="surfacebw">
                            <label for="surfacebw">surfacebw</label>
                        </div>
                        <span class="input-help">Use WHIT function for whole bound state</span>
                    </div>
                    <div class="form-field">
                        <div class="checkbox-label">
                            <input type="checkbox" id="surfacesw">
                            <label for="surfacesw">surfacesw</label>
                        </div>
                        <span class="input-help">Use Coulomb function for whole scattering state</span>
                    </div>
                    <div class="form-field">
                        <div class="checkbox-label">
                            <input type="checkbox" id="ubx">
                            <label for="ubx">ubx</label>
                        </div>
                        <span class="input-help">use complex potential for pair b-x system</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-field">
                        <div class="checkbox-label">
                            <input type="checkbox" id="adde">
                            <label for="adde">adde</label>
                        </div>
                        <span class="input-help">add pot "e" to uxA potential</span>
                    </div>
                    <div class="form-field">
                        <div class="checkbox-label">
                            <input type="checkbox" id="simpson_int">
                            <label for="simpson_int">simpson_int</label>
                        </div>
                        <span class="input-help">Use Simpson integration method instead of Gaussian quadrature</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="system-tab" class="tab-content">
            <div class="form-group">
                <h3>Reaction System: a + A → b + x + A → x + b + A → b + anything</h3>
                <div class="alert alert-info">
                    <i class="fas fa-atom"></i> Define all particles involved in the reaction. The projectile (a) breaks up into an ejectile (b) and a transferred particle (x).
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="namep">namep (a)</label>
                        <input type="text" id="namep" value="d" maxlength="5">
                        <span class="input-help">Name of projectile (a)</span>
                    </div>
                    <div class="form-field">
                        <label for="massp">massp</label>
                        <input type="number" id="massp" value="2.0" step="0.0001">
                        <span class="input-help">Mass of projectile (amu)</span>
                    </div>
                    <div class="form-field">
                        <label for="zp">zp</label>
                        <input type="number" id="zp" value="1.0" step="0.1">
                        <span class="input-help">Charge of projectile</span>
                    </div>
                    <div class="form-field">
                        <label for="jp">jp</label>
                        <input type="number" id="jp" value="1.0" step="0.5">
                        <span class="input-help">Spin of projectile</span>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="namet">namet (A)</label>
                        <input type="text" id="namet" value="Au" maxlength="5">
                        <span class="input-help">Name of target (A)</span>
                    </div>
                    <div class="form-field">
                        <label for="masst">masst</label>
                        <input type="number" id="masst" value="197.0" step="0.0001">
                        <span class="input-help">Mass of target (amu)</span>
                    </div>
                    <div class="form-field">
                        <label for="zt">zt</label>
                        <input type="number" id="zt" value="79.0" step="0.1">
                        <span class="input-help">Charge of target</span>
                    </div>
                    <div class="form-field">
                        <label for="jt">jt</label>
                        <input type="number" id="jt" value="0.0" step="0.5">
                        <span class="input-help">Spin of target</span>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="nameb">nameb (b)</label>
                        <input type="text" id="nameb" value="p" maxlength="5">
                        <span class="input-help">Name of ejectile (b)</span>
                    </div>
                    <div class="form-field">
                        <label for="massb">massb</label>
                        <input type="number" id="massb" value="1.0" step="0.0001">
                        <span class="input-help">Mass of ejectile (amu)</span>
                    </div>
                    <div class="form-field">
                        <label for="zb">zb</label>
                        <input type="number" id="zb" value="1.0" step="0.1">
                        <span class="input-help">Charge of ejectile</span>
                    </div>
                    <div class="form-field">
                        <label for="jb">jb</label>
                        <input type="number" id="jb" value="0.5" step="0.5">
                        <span class="input-help">Spin of ejectile</span>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="namex">namex (x)</label>
                        <input type="text" id="namex" value="n" maxlength="5">
                        <span class="input-help">Name of transferred particle (x)</span>
                    </div>
                    <div class="form-field">
                        <label for="massx">massx</label>
                        <input type="number" id="massx" value="1.0" step="0.0001">
                        <span class="input-help">Mass of transferred particle (amu)</span>
                    </div>
                    <div class="form-field">
                        <label for="zx">zx</label>
                        <input type="number" id="zx" value="0.0" step="0.1">
                        <span class="input-help">Charge of transferred particle</span>
                    </div>
                    <div class="form-field">
                        <label for="jx">jx</label>
                        <input type="number" id="jx" value="0.5" step="0.5">
                        <span class="input-help">Spin of transferred particle</span>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="sbx">sbx</label>
                        <input type="number" id="sbx" value="0.0" step="0.1">
                        <span class="input-help">sbx parameter (if jb and jx < 0.1, max(jb,jx) is used)</span>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <h3>Reaction Energetics and Quantum Numbers</h3>
                <div class="form-row">
                    <div class="form-field">
                        <label for="qval">qval</label>
                        <input type="number" id="qval" value="-2.2" step="0.1">
                        <span class="input-help">Q-value of the reaction (MeV)</span>
                    </div>
                    <div class="form-field">
                        <label for="be">be</label>
                        <input type="number" id="be" value="2.2" step="0.01">
                        <span class="input-help">Binding energy of projectile (MeV)</span>
                    </div>
                    <div class="form-field">
                        <label for="lbx">lbx</label>
                        <input type="number" id="lbx" value="0" min="0" step="1">
                        <span class="input-help">Angular momentum between b and x</span>
                    </div>
                    <div class="form-field">
                        <label for="nodes">nodes</label>
                        <input type="number" id="nodes" value="1" min="1" step="1">
                        <span class="input-help">Number of nodes in the radial wave function</span>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="ptyp">ptyp</label>
                        <select id="ptyp">
                            <option value="1">+1 (Positive)</option>
                            <option value="-1">-1 (Negative)</option>
                        </select>
                        <span class="input-help">Parity of projectile</span>
                    </div>
                    <div class="form-field">
                        <label for="ptyt">ptyt</label>
                        <select id="ptyt">
                            <option value="1">+1 (Positive)</option>
                            <option value="-1">-1 (Negative)</option>
                        </select>
                        <span class="input-help">Parity of target</span>
                    </div>
                    <div class="form-field">
                        <label for="ptyb">ptyb</label>
                        <select id="ptyb">
                            <option value="1">+1 (Positive)</option>
                            <option value="-1">-1 (Negative)</option>
                        </select>
                        <span class="input-help">Parity of ejectile</span>
                    </div>
                    <div class="form-field">
                        <label for="ptyx">ptyx</label>
                        <select id="ptyx">
                            <option value="1">+1 (Positive)</option>
                            <option value="-1">-1 (Negative)</option>
                        </select>
                        <span class="input-help">Parity of transferred particle</span>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="gswf">gswf</label>
                        <input type="text" id="gswf" value="">
                        <span class="input-help">Filename to read external projectile ground-state wavefunction (leave blank to calculate internally)</span>
                    </div>
                </div>
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i> If a filename is provided for 'gswf', the file format must be: 1st line: custom comment; 2nd line: number of radial points; next lines: radius and wavefunction (including "r" factor).
                </div>
            </div>
        </div>

        <div id="outgoing-tab" class="tab-content">
            <div class="form-group">
                <h3>Outgoing Channel Energy Parameters</h3>
                <div class="alert alert-info">
                    <i class="fas fa-atom"></i> Define the energy grid for the outgoing channel.
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="ecmbmin">ecmbmin</label>
                        <input type="number" id="ecmbmin" value="0.0" step="0.1">
                        <span class="input-help">Minimum center-of-mass energy (MeV)</span>
                    </div>
                    <div class="form-field">
                        <label for="ecmbmax">ecmbmax</label>
                        <input type="number" id="ecmbmax" value="20.0" step="0.1">
                        <span class="input-help">Maximum center-of-mass energy (MeV)</span>
                    </div>
                    <div class="form-field">
                        <label for="ecmbh">ecmbh</label>
                        <input type="number" id="ecmbh" value="1.0" step="0.1">
                        <span class="input-help">Center-of-mass energy step (MeV)</span>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="bin">bin</label>
                        <input type="number" id="bin" value="0" min="0" step="1">
                        <span class="input-help">Bin number</span>
                    </div>
                    <div class="form-field">
                        <label for="wbin">wbin</label>
                        <input type="number" id="wbin" value="0.0" step="0.1">
                        <span class="input-help">Bin width</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="potential-tab" class="tab-content">
            <div class="form-group">
                <h3>Interaction Potentials</h3>
                <div class="alert alert-info">
                    <i class="fas fa-atom"></i> Define the potentials between different pairs of particles. Multiple potentials can be defined.
                </div>
                
                <div id="potentials-container">
                    <!-- Potential rows will be added here -->
                </div>
                
                <button id="add-potential" class="btn">
                    <i class="fas fa-plus"></i> Add Potential
                </button>
            </div>
        </div>

        <div id="vincent-tab" class="tab-content">
            <div class="form-group">
                <h3>Vincent-Fortune Method Parameters</h3>
                <div class="alert alert-info">
                    <i class="fas fa-atom"></i> The Vincent-Fortune method is an alternative approach for solving the wave equations. These parameters are optional.
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <div class="checkbox-label">
                            <input type="checkbox" id="VF">
                            <label for="VF">VF</label>
                        </div>
                        <span class="input-help">Enable Vincent-Fortune method</span>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="Pi_ext_ny">Pi_ext_ny</label>
                        <input type="number" id="Pi_ext_ny" value="60" min="1">
                        <span class="input-help">Number of points for Vincent-Fortune method (default: nr)</span>
                    </div>
                    <div class="form-field">
                        <label for="Pi_ext_ymax">Pi_ext_ymax</label>
                        <input type="number" id="Pi_ext_ymax" value="7000" step="10">
                        <span class="input-help">Maximum radius for Vincent-Fortune method (default: rmax)</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group" style="text-align: center;">
            <button id="generate-btn" class="btn btn-secondary">
                <i class="fas fa-code"></i> Generate Input File
            </button>
            <button id="reset-btn" class="btn btn-warning">
                <i class="fas fa-undo"></i> Reset All
            </button>
        </div>

        <div class="output-container">
            <div class="output-header">
                <h3>Generated Input File</h3>
            </div>
            <button id="copy-btn" class="copy-btn">
                <i class="fas fa-copy"></i> Copy
            </button>
            <textarea id="output" readonly></textarea>
        </div>
    </div>
    <footer>
        <p>Smoothie Input Generator | Jin Lei and Antonio M. Moro | Non-elastic breakup calculations in inclusive breakup reactions</p>
        <p>For more information on the smoothie code and the IAV formalism, please refer to the academic publications.</p>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Tab switching
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs and tab contents
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Add active class to the clicked tab
                    this.classList.add('active');
                    
                    // Show the corresponding tab content
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId + '-tab').classList.add('active');
                });
            });
            
            // Add potential
            const addPotentialBtn = document.getElementById('add-potential');
            const potentialsContainer = document.getElementById('potentials-container');
            
            addPotentialBtn.addEventListener('click', function() {
                const potentialIndex = document.querySelectorAll('.potential-row').length + 1;
                
                const potentialRow = document.createElement('div');
                potentialRow.className = 'potential-row';
                
                potentialRow.innerHTML = `
                    <button class="remove-potential" title="Remove this potential"><i class="fas fa-times"></i></button>
                    <h4>Potential ${potentialIndex}</h4>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="kp1-${potentialIndex}">kp1</label>
                            <select id="kp1-${potentialIndex}">
                                <option value="a">a (Projectile)</option>
                                <option value="b">b (Ejectile)</option>
                                <option value="x">x (Transferred)</option>
                                <option value="t">t (Target)</option>
                                <option value="f">f (Fusion)</option>
                            </select>
                            <span class="input-help">Potential identifier</span>
                        </div>
                        <div class="form-field">
                            <label for="kp2-${potentialIndex}">kp2</label>
                            <input type="number" id="kp2-${potentialIndex}" value="${potentialIndex}" min="1">
                            <span class="input-help">Potential index</span>
                        </div>
                        <div class="form-field">
                            <label for="ptype-${potentialIndex}">ptype</label>
                            <select id="ptype-${potentialIndex}">
                                <option value="1">1 - Woods-Saxon</option>
                                <option value="2">2 - Gaussian</option>
                                <option value="3">3 - Nucleon-nucleus Koning-Delaroche (KD02)</option>
                                <option value="4">4 - Nucleon-nucleus Varner et al (CH89)</option>
                                <option value="5">5 - Nucleon-nucleus Bechetti-Greenless (bgPN)</option>
                                <option value="6">6 - Deuteron OMP for 12< A< 209 (YYQ06)</option>
                                <option value="8">8 - Nucleon-actinide OMP (YYH10)</option>
                                <option value="9">9 - 3H/3He from Bechetti-Greenless (BG69)</option>
                                <option value="10">10 - Deuteron OMP for 12< A< 209 (YYQ06)</option>
                                <option value="11">11 - Akyuz-Winther potential</option>
                                <option value="13">13 - Alpha global potential</option>
                                <option value="14">14 - BG69 with uw*0.8</option>
                                <option value="15">15 - Morillon's DOM potential</option>
                                <option value="16">16 - Guo triton potential for 3H+Sn</option>
                                <option value="19">19 - 3He/3H GDP08 global potential</option>
                                <option value="20">20 - Avrigeanu alpha potential (2010)</option>
                                <option value="41">41 - Read potential from fort.41</option>
                                <option value="42">42 - Read potential from fort.42</option>
                                <option value="43">43 - Read potential from fort.43</option>
                                <option value="44">44 - Read potential from fort.44</option>
                            </select>
                            <span class="input-help">Potential type</span>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-field">
                            <label for="a1-${potentialIndex}">a1</label>
                            <input type="number" id="a1-${potentialIndex}" value="0.0" step="0.1">
                            <span class="input-help">Mass parameter 1 for radius conversion</span>
                        </div>
                        <div class="form-field">
                            <label for="a2-${potentialIndex}">a2</label>
                            <input type="number" id="a2-${potentialIndex}" value="0.0" step="0.1">
                            <span class="input-help">Mass parameter 2 for radius conversion</span>
                        </div>
                        <div class="form-field">
                            <label for="rc-${potentialIndex}">rc</label>
                            <input type="number" id="rc-${potentialIndex}" value="1.3" step="0.1">
                            <span class="input-help">Coulomb radius parameter (fm)</span>
                        </div>
                    </div>
                    
                    <h5>Woods-Saxon Real Volume Parameters</h5>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="uv-${potentialIndex}">uv</label>
                            <input type="number" id="uv-${potentialIndex}" value="-50.0" step="1.0">
                            <span class="input-help">Real potential depth (MeV)</span>
                        </div>
                        <div class="form-field">
                            <label for="rv-${potentialIndex}">rv</label>
                            <input type="number" id="rv-${potentialIndex}" value="1.2" step="0.1">
                            <span class="input-help">Real potential radius (fm)</span>
                        </div>
                        <div class="form-field">
                            <label for="av-${potentialIndex}">av</label>
                            <input type="number" id="av-${potentialIndex}" value="0.65" step="0.01">
                            <span class="input-help">Real potential diffuseness (fm)</span>
                        </div>
                    </div>
                    
                    <h5>Woods-Saxon Imaginary Volume Parameters</h5>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="uw-${potentialIndex}">uw</label>
                            <input type="number" id="uw-${potentialIndex}" value="-10.0" step="1.0">
                            <span class="input-help">Imaginary potential depth (MeV)</span>
                        </div>
                        <div class="form-field">
                            <label for="rw-${potentialIndex}">rw</label>
                            <input type="number" id="rw-${potentialIndex}" value="1.2" step="0.1">
                            <span class="input-help">Imaginary potential radius (fm)</span>
                        </div>
                        <div class="form-field">
                            <label for="aw-${potentialIndex}">aw</label>
                            <input type="number" id="aw-${potentialIndex}" value="0.65" step="0.01">
                            <span class="input-help">Imaginary potential diffuseness (fm)</span>
                        </div>
                    </div>
                    
                    <h5>Additional Imaginary Volume Parameters</h5>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="uw1-${potentialIndex}">uw1</label>
                            <input type="number" id="uw1-${potentialIndex}" value="0.0" step="1.0">
                            <span class="input-help">Additional imaginary potential depth (MeV)</span>
                        </div>
                        <div class="form-field">
                            <label for="rw1-${potentialIndex}">rw1</label>
                            <input type="number" id="rw1-${potentialIndex}" value="0.0" step="0.1">
                            <span class="input-help">Additional imaginary potential radius (fm)</span>
                        </div>
                        <div class="form-field">
                            <label for="aw1-${potentialIndex}">aw1</label>
                            <input type="number" id="aw1-${potentialIndex}" value="0.1" step="0.01">
                            <span class="input-help">Additional imaginary potential diffuseness (fm)</span>
                        </div>
                    </div>
                    
                    <h5>Spin-Orbit Real Parameters</h5>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="vsov-${potentialIndex}">vsov</label>
                            <input type="number" id="vsov-${potentialIndex}" value="0.0" step="1.0">
                            <span class="input-help">Real spin-orbit potential depth (MeV)</span>
                        </div>
                        <div class="form-field">
                            <label for="rsov-${potentialIndex}">rsov</label>
                            <input type="number" id="rsov-${potentialIndex}" value="0.0" step="0.1">
                            <span class="input-help">Real spin-orbit potential radius (fm)</span>
                        </div>
                        <div class="form-field">
                            <label for="asov-${potentialIndex}">asov</label>
                            <input type="number" id="asov-${potentialIndex}" value="0.1" step="0.01">
                            <span class="input-help">Real spin-orbit potential diffuseness (fm)</span>
                        </div>
                    </div>
                    
                    <h5>Spin-Orbit Imaginary Parameters</h5>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="vsow-${potentialIndex}">vsow</label>
                            <input type="number" id="vsow-${potentialIndex}" value="0.0" step="1.0">
                            <span class="input-help">Imaginary spin-orbit potential depth (MeV)</span>
                        </div>
                        <div class="form-field">
                            <label for="rsow-${potentialIndex}">rsow</label>
                            <input type="number" id="rsow-${potentialIndex}" value="0.0" step="0.1">
                            <span class="input-help">Imaginary spin-orbit potential radius (fm)</span>
                        </div>
                        <div class="form-field">
                            <label for="asow-${potentialIndex}">asow</label>
                            <input type="number" id="asow-${potentialIndex}" value="0.1" step="0.01">
                            <span class="input-help">Imaginary spin-orbit potential diffuseness (fm)</span>
                        </div>
                    </div>
                    
                    <h5>Surface Real Parameters</h5>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="vd-${potentialIndex}">vd</label>
                            <input type="number" id="vd-${potentialIndex}" value="0.0" step="1.0">
                            <span class="input-help">Real surface potential depth (MeV)</span>
                        </div>
                        <div class="form-field">
                            <label for="rvd-${potentialIndex}">rvd</label>
                            <input type="number" id="rvd-${potentialIndex}" value="0.0" step="0.1">
                            <span class="input-help">Real surface potential radius (fm)</span>
                        </div>
                        <div class="form-field">
                            <label for="avd-${potentialIndex}">avd</label>
                            <input type="number" id="avd-${potentialIndex}" value="0.1" step="0.01">
                            <span class="input-help">Real surface potential diffuseness (fm)</span>
                        </div>
                    </div>
                    
                    <h5>Surface Imaginary Parameters</h5>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="wd-${potentialIndex}">wd</label>
                            <input type="number" id="wd-${potentialIndex}" value="0.0" step="1.0">
                            <span class="input-help">Imaginary surface potential depth (MeV)</span>
                        </div>
                        <div class="form-field">
                            <label for="rwd-${potentialIndex}">rwd</label>
                            <input type="number" id="rwd-${potentialIndex}" value="0.0" step="0.1">
                            <span class="input-help">Imaginary surface potential radius (fm)</span>
                        </div>
                        <div class="form-field">
                            <label for="awd-${potentialIndex}">awd</label>
                            <input type="number" id="awd-${potentialIndex}" value="0.1" step="0.01">
                            <span class="input-help">Imaginary surface potential diffuseness (fm)</span>
                        </div>
                    </div>
                    
                    <h5>Additional Parameters</h5>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="ecut-${potentialIndex}">ecut</label>
                            <input type="number" id="ecut-${potentialIndex}" value="-99.0" step="1.0">
                            <span class="input-help">Energy cutoff (MeV)</span>
                        </div>
                        <div class="form-field">
                            <label for="dump-${potentialIndex}">dump</label>
                            <input type="number" id="dump-${potentialIndex}" value="-99.0" step="0.1">
                            <span class="input-help">Damping factor</span>
                        </div>
                        <div class="form-field">
                            <label for="efix-${potentialIndex}">efix</label>
                            <input type="number" id="efix-${potentialIndex}" value="0.0" step="0.1">
                            <span class="input-help">Energy fix parameter (0 = no fix)</span>
                        </div>
                    </div>
                    
                    <h5>Renormalization Parameters</h5>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="renv-${potentialIndex}">renv</label>
                            <input type="number" id="renv-${potentialIndex}" value="1.0" step="0.1">
                            <span class="input-help">Real volume renormalization</span>
                        </div>
                        <div class="form-field">
                            <label for="renw-${potentialIndex}">renw</label>
                            <input type="number" id="renw-${potentialIndex}" value="1.0" step="0.1">
                            <span class="input-help">Imaginary volume renormalization</span>
                        </div>
                        <div class="form-field">
                            <label for="renvd-${potentialIndex}">renvd</label>
                            <input type="number" id="renvd-${potentialIndex}" value="1.0" step="0.1">
                            <span class="input-help">Real surface renormalization</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="renwd-${potentialIndex}">renwd</label>
                            <input type="number" id="renwd-${potentialIndex}" value="1.0" step="0.1">
                            <span class="input-help">Imaginary surface renormalization</span>
                        </div>
                        <div class="form-field">
                            <label for="renvls-${potentialIndex}">renvls</label>
                            <input type="number" id="renvls-${potentialIndex}" value="1.0" step="0.1">
                            <span class="input-help">Real spin-orbit renormalization</span>
                        </div>
                        <div class="form-field">
                            <label for="renwls-${potentialIndex}">renwls</label>
                            <input type="number" id="renwls-${potentialIndex}" value="1.0" step="0.1">
                            <span class="input-help">Imaginary spin-orbit renormalization</span>
                        </div>
                    </div>
                `;
                
                potentialsContainer.appendChild(potentialRow);
                
                // Remove potential button
                potentialRow.querySelector('.remove-potential').addEventListener('click', function() {
                    potentialRow.remove();
                    // Update indices of remaining potentials
                    updatePotentialIndices();
                });
            });
            
            function updatePotentialIndices() {
                const potentialRows = document.querySelectorAll('.potential-row');
                potentialRows.forEach((row, index) => {
                    row.querySelector('h4').textContent = `Potential ${index + 1}`;
                });
            }
            
            // Generate input file
            const generateBtn = document.getElementById('generate-btn');
            const outputElem = document.getElementById('output');
            
            generateBtn.addEventListener('click', function() {
                generateInputFile();
            });
            
            function generateInputFile() {
                let output = '';
                
                // Generate &global section
                output += '&global\n';
                output += `  hcm = ${document.getElementById('hcm').value},\n`;
                output += `  lmax = ${document.getElementById('lmax').value},\n`;
                output += `  elab = ${document.getElementById('elab').value},\n`;
                output += `  thmin = ${document.getElementById('thmin').value},\n`;
                output += `  thmax = ${document.getElementById('thmax').value},\n`;
                output += `  thinc = ${document.getElementById('thinc').value},\n`;
                output += `  cutl = ${document.getElementById('cutl').value},\n`;
                output += `  lmin = ${document.getElementById('lmin').value},\n`;
                output += `  nx = ${document.getElementById('nx').value},\n`;
                output += `  rmax = ${document.getElementById('rmax').value},\n`;
                output += `  nr = ${document.getElementById('nr').value},\n`;
                output += `  jtmin = ${document.getElementById('jtmin').value},\n`;
                output += `  jtmax = ${document.getElementById('jtmax').value},\n`;
                output += `  lxmin = ${document.getElementById('lxmin').value},\n`;
                output += `  lxmax = ${document.getElementById('lxmax').value},\n`;
                output += `  rs = ${document.getElementById('rs').value},\n`;
                output += `  dwba = ${document.getElementById('dwba').value},\n`;
                
                // Boolean flags
                output += document.getElementById('prior').checked ? '  prior = .true.,\n' : '  prior = .false.,\n';
                output += document.getElementById('printf').checked ? '  printf = .true.,\n' : '  printf = .false.,\n';
                output += document.getElementById('icf').checked ? '  icf = .true.,\n' : '  icf = .false.,\n';
                output += document.getElementById('HM').checked ? '  HM = .true.,\n' : '  HM = .false.,\n';
                output += document.getElementById('UT').checked ? '  UT = .true.,\n' : '  UT = .false.,\n';
                output += document.getElementById('surfacebw').checked ? '  surfacebw = .true.,\n' : '  surfacebw = .false.,\n';
                output += document.getElementById('surfacesw').checked ? '  surfacesw = .true.,\n' : '  surfacesw = .false.,\n';
                output += document.getElementById('ubx').checked ? '  ubx = .true.,\n' : '  ubx = .false.,\n';
                output += document.getElementById('adde').checked ? '  adde = .true.,\n' : '  adde = .false.,\n';
                output += document.getElementById('simpson_int').checked ? '  simpson_int = .true.,\n' : '  simpson_int = .false.,\n';
                
                output += '/\n\n';
                
                // Generate &system section
                output += '&system\n';
                output += `  namep = '${document.getElementById('namep').value}',\n`;
                output += `  massp = ${document.getElementById('massp').value},\n`;
                output += `  zp = ${document.getElementById('zp').value},\n`;
                output += `  jp = ${document.getElementById('jp').value},\n`;
                output += `  namet = '${document.getElementById('namet').value}',\n`;
                output += `  masst = ${document.getElementById('masst').value},\n`;
                output += `  zt = ${document.getElementById('zt').value},\n`;
                output += `  jt = ${document.getElementById('jt').value},\n`;
                output += `  nameb = '${document.getElementById('nameb').value}',\n`;
                output += `  massb = ${document.getElementById('massb').value},\n`;
                output += `  zb = ${document.getElementById('zb').value},\n`;
                output += `  jb = ${document.getElementById('jb').value},\n`;
                output += `  namex = '${document.getElementById('namex').value}',\n`;
                output += `  massx = ${document.getElementById('massx').value},\n`;
                output += `  zx = ${document.getElementById('zx').value},\n`;
                output += `  jx = ${document.getElementById('jx').value},\n`;
                output += `  sbx = ${document.getElementById('sbx').value},\n`;
                output += `  qval = ${document.getElementById('qval').value},\n`;
                output += `  be = ${document.getElementById('be').value},\n`;
                output += `  lbx = ${document.getElementById('lbx').value},\n`;
                output += `  nodes = ${document.getElementById('nodes').value},\n`;
                output += `  ptyp = ${document.getElementById('ptyp').value},\n`;
                output += `  ptyt = ${document.getElementById('ptyt').value},\n`;
                output += `  ptyb = ${document.getElementById('ptyb').value},\n`;
                output += `  ptyx = ${document.getElementById('ptyx').value},\n`;
                
                if (document.getElementById('gswf').value) {
                    output += `  gswf = '${document.getElementById('gswf').value}',\n`;
                }
                
                output += '/\n\n';
                
                // Generate &outgoing section
                output += '&outgoing\n';
                output += `  ecmbmin = ${document.getElementById('ecmbmin').value},\n`;
                output += `  ecmbmax = ${document.getElementById('ecmbmax').value},\n`;
                output += `  ecmbh = ${document.getElementById('ecmbh').value},\n`;
                output += `  bin = ${document.getElementById('bin').value},\n`;
                output += `  wbin = ${document.getElementById('wbin').value},\n`;
                output += '/\n\n';
                
                // Generate &potential section(s)
                const potentialRows = document.querySelectorAll('.potential-row');
                potentialRows.forEach((row, index) => {
                    const potentialIndex = index + 1;
                    
                    output += '&potential\n';
                    output += `  kp1 = '${document.getElementById(`kp1-${potentialIndex}`).value}',\n`;
                    output += `  kp2 = ${document.getElementById(`kp2-${potentialIndex}`).value},\n`;
                    output += `  ptype = ${document.getElementById(`ptype-${potentialIndex}`).value},\n`;
                    output += `  a1 = ${document.getElementById(`a1-${potentialIndex}`).value},\n`;
                    output += `  a2 = ${document.getElementById(`a2-${potentialIndex}`).value},\n`;
                    output += `  rc = ${document.getElementById(`rc-${potentialIndex}`).value},\n`;
                    
                    // Create an array for uv (for now just simple)
                    output += `  uv = ${document.getElementById(`uv-${potentialIndex}`).value},\n`;
                    
                    output += `  av = ${document.getElementById(`av-${potentialIndex}`).value},\n`;
                    output += `  rv = ${document.getElementById(`rv-${potentialIndex}`).value},\n`;
                    output += `  uw = ${document.getElementById(`uw-${potentialIndex}`).value},\n`;
                    output += `  aw = ${document.getElementById(`aw-${potentialIndex}`).value},\n`;
                    output += `  rw = ${document.getElementById(`rw-${potentialIndex}`).value},\n`;
                    
                    output += `  uw1 = ${document.getElementById(`uw1-${potentialIndex}`).value},\n`;
                    output += `  aw1 = ${document.getElementById(`aw1-${potentialIndex}`).value},\n`;
                    output += `  rw1 = ${document.getElementById(`rw1-${potentialIndex}`).value},\n`;
                    
                    output += `  vsov = ${document.getElementById(`vsov-${potentialIndex}`).value},\n`;
                    output += `  rsov = ${document.getElementById(`rsov-${potentialIndex}`).value},\n`;
                    output += `  asov = ${document.getElementById(`asov-${potentialIndex}`).value},\n`;
                    
                    output += `  vsow = ${document.getElementById(`vsow-${potentialIndex}`).value},\n`;
                    output += `  rsow = ${document.getElementById(`rsow-${potentialIndex}`).value},\n`;
                    output += `  asow = ${document.getElementById(`asow-${potentialIndex}`).value},\n`;
                    
                    output += `  vd = ${document.getElementById(`vd-${potentialIndex}`).value},\n`;
                    output += `  rvd = ${document.getElementById(`rvd-${potentialIndex}`).value},\n`;
                    output += `  avd = ${document.getElementById(`avd-${potentialIndex}`).value},\n`;
                    
                    output += `  wd = ${document.getElementById(`wd-${potentialIndex}`).value},\n`;
                    output += `  rwd = ${document.getElementById(`rwd-${potentialIndex}`).value},\n`;
                    output += `  awd = ${document.getElementById(`awd-${potentialIndex}`).value},\n`;
                    
                    output += `  ecut = ${document.getElementById(`ecut-${potentialIndex}`).value},\n`;
                    output += `  dump = ${document.getElementById(`dump-${potentialIndex}`).value},\n`;
                    output += `  efix = ${document.getElementById(`efix-${potentialIndex}`).value},\n`;
                    
                    output += `  renv = ${document.getElementById(`renv-${potentialIndex}`).value},\n`;
                    output += `  renw = ${document.getElementById(`renw-${potentialIndex}`).value},\n`;
                    output += `  renvd = ${document.getElementById(`renvd-${potentialIndex}`).value},\n`;
                    output += `  renwd = ${document.getElementById(`renwd-${potentialIndex}`).value},\n`;
                    output += `  renvls = ${document.getElementById(`renvls-${potentialIndex}`).value},\n`;
                    output += `  renwls = ${document.getElementById(`renwls-${potentialIndex}`).value},\n`;
                    
                    output += '/\n\n';
                });
                
                // Generate &vincent section
                output += '&vincent\n';
                output += `  Pi_ext_ny = ${document.getElementById('Pi_ext_ny').value},\n`;
                output += `  Pi_ext_ymax = ${document.getElementById('Pi_ext_ymax').value},\n`;
                output += document.getElementById('VF').checked ? '  VF = .true.,\n' : '  VF = .false.,\n';
                output += '/\n';
                
                // Display the generated input
                outputElem.value = output;
            }
            
            // Copy button
            const copyBtn = document.getElementById('copy-btn');
            copyBtn.addEventListener('click', function() {
                outputElem.select();
                document.execCommand('copy');
                
                // Feedback animation
                copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                setTimeout(() => {
                    copyBtn.innerHTML = '<i class="fas fa-copy"></i> Copy';
                }, 2000);
            });
            
            // Download button
            const downloadBtn = document.getElementById('download-btn');
            downloadBtn.addEventListener('click', function() {
                if (!outputElem.value) {
                    generateInputFile();
                }
                
                const blob = new Blob([outputElem.value], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'smoothie_input.in';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });
            
            // Reset button
            const resetBtn = document.getElementById('reset-btn');
            resetBtn.addEventListener('click', function() {
                if (confirm('Are you sure you want to reset all fields?')) {
                    location.reload();
                }
            });
            
            // Add the first potential by default
            addPotentialBtn.click();
        });
    </script>
</body>
</html>
